# Behavior / Logic DSL — Документация

**Behavior / Logic DSL** — слой в Unified App DSL, отвечающий за описание логического поведения приложения: бизнес-правила, условия, реакции на события, методы, состояния и логику потока.

---

## Цели слоя

* Четкое описание поведения для моделей и UI
* Декларативность логики приложения
* Поддержка состояния, действий, событий
* Связь с Data DSL, UI DSL, Interaction DSL

---

## Ключевые конструкции

### Обработчик события

```dsl
если Статус = "ожидает" и получено(оплата) {
  Статус = "оплачен"
  уведоми(Клиент)
}
```

### Метод для модели

```dsl
метод заказ.оплатить() {
  если состояние = "ожидание" {
    состояние = "оплачен"
    событие(оплата)
  }
}
```

### Состояния и переходы

```dsl
состояния Заказ: [ ожидание, оплачен, завершен ]
```

### Ветвления и отложенные действия

```dsl
если тариф = "Premium" и сеанс.длина > 60 {
  доплата = расчет(время, тариф)
}
```

---

## Интеграция

| Слой DSL        | Роль интеграции                              |
| --------------- | -------------------------------------------- |
| Data DSL        | Описываемые модели используются в логике     |
| UI DSL          | Состояния и логика управляют UI компонентами |
| Interaction DSL | События взаимодействия вызывают логику       |
| Test DSL        | Сценарии тестируют логические ветки          |

---

## Пример композиции

```dsl
когда создан(Заказ) {
  если заказ.тип = "срочный" {
    отправить(уведомление, мастера)
  }
}
```

---

## Возможности расширения

* Стейт-машины (FSM) и объявление цепочек действий
* Вызов REST / GraphQL из DSL
* Логические предикаты (возраст, гео, роль)
* Генерация сервисов / юниттестов
