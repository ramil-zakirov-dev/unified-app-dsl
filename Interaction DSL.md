# Interaction DSL — Документация

**Interaction DSL** отвечает за декларативное описание пользовательских взаимодействий, событий, переходов, анимаций и состояний в интерфейсе. Этот слой соединяет UI DSL и Behavior DSL, формируя связующую логику между визуальным представлением и бизнес-логикой.

---

## Цели Interaction DSL

* Описание взаимодействий между пользователем и приложением
* Обработка событий (нажатия, жесты, фокус и т.д.)
* Определение переходов состояний
* Управление триггерами и условиями переходов
* Интеграция с UI, Animation и Behavior слоями

---

## Основные конструкции DSL

### События (events)

```dsl
событие НажатиеКнопки {
  элемент: КнопкаОтправить
  действие: ОтправитьФорму
}

событие ВводТекста {
  элемент: ПолеПоиска
  действие: ФильтроватьСписок
}
```

### Условия и триггеры

```dsl
триггер ПоказыватьПодсказку {
  когда: полеФокусе(ПолеEmail)
  показать: ПодсказкаEmail
}

триггер СкрытьПодсказку {
  когда: полеНеФокусе(ПолеEmail)
  скрыть: ПодсказкаEmail
}
```

### Переходы состояний (state transitions)

```dsl
состояние Карточка {
  начальное: свернуто

  переход открыть {
    при: нажатие
    к: развернуто
    анимация: плавноРазвернуть
  }

  переход закрыть {
    при: двойнойКлик
    к: свернуто
    анимация: плавноСвернуть
  }
}
```

---

## Интеграции с другими слоями DSL

| DSL            | Интеграция                                               |
| -------------- | -------------------------------------------------------- |
| UI DSL         | Привязка событий к элементам интерфейса                  |
| Animation DSL  | Связь событий с анимацией при переходах                  |
| Behavior DSL   | Вызов бизнес-логики и эффектов                           |
| Data DSL       | Валидация и реакция на изменённые данные                 |
| Validation DSL | Проверка перед выполнением действия                      |
| Test DSL       | Возможность мокирования или триггеринга событий в тестах |

---

## Пример взаимодействия с формой

```dsl
событие НажатиеОтправить {
  элемент: КнопкаОтправить
  перед: ПроверитьВалидациюФормы
  если: валидацияПрошла
  тогда: ОтправитьДанные
  иначе: ПоказатьОшибки
}
```

---

## Расширения DSL

* Поддержка drag-and-drop
* Поддержка сложных жестов (pinch, swipe)
* Управление фокусом
* Контекстно-зависимые действия
* Поддержка горячих клавиш и accessibility

---

## Пример генерации (React)

```tsx
<button onClick={() => {
  if (validate(formData)) {
    send(formData);
  } else {
    showErrors();
  }
}}>
  Отправить
</button>
```

---

## Заключение

Interaction DSL играет ключевую роль в соединении пользовательских действий с логикой приложения. Он позволяет описывать сложные сценарии взаимодействия декларативно, сохраняя читаемость и единый источник правды в рамках Unified App DSL.
