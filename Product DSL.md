# Product DSL — Документация

**Product DSL** — это слой в архитектуре Unified App DSL, предназначенный для декларативного описания структуры и особенностей продукта: его фичей, ролей, тарифов, сегментов пользователей и продуктовой логики.

---

## Цели Product DSL

* Централизованное описание бизнес-продукта
* Связь с другими слоями: Фича DSL, Доступ DSL, UI DSL, Тестовый DSL
* Возможность формирования roadmap и управления фичами

---

## Основные конструкции

### Описание продукта

```dsl
продукт ПриложениеДоставкаЕды {
  версии: [ Базовая, Премиум ]
  роли: [ Клиент, Ресторан, Курьер, Администратор ]
  сегменты: [ B2C ]
}
```

### Описание фич

```dsl
фича ПросмотрМеню {
  активна: true
  доступна: [ Клиент ]
  версии: [ Базовая, Премиум ]
}

фича ЗаказБлюда {
  активна: true
  доступна: [ Клиент ]
  версии: [ Базовая, Премиум ]
}

фича ОнлайнОплата {
  активна: true
  доступна: [ Клиент ]
  версии: [ Премиум ]
}

фича Доставка {
  активна: true
  доступна: [ Курьер ]
  версии: [ Базовая, Премиум ]
}

фича УправлениеМеню {
  активна: true
  доступна: [ Ресторан ]
  версии: [ Премиум ]
}
```

### Описание тарифов

```dsl
тариф Бесплатный {
  цена: 0
  доступныеФичи: [ МгновенныйЗаказ ]
}

тариф Премиум {
  цена: 799
  доступныеФичи: [ МгновенныйЗаказ, ОтложенныйВызов ]
}
```


---

## Интеграция с другими DSL

| DSL           | Взаимодействие с Product DSL                       |
| ------------- | -------------------------------------------------- |
| Фича DSL   | Product DSL управляет активностью фич              |
| Доступ DSL    | Определяет, кто имеет доступ к фичам               |
| UI DSL        | Определяет условную отрисовку в зависимости от фич |
| Тестовый DSL      | Покрытие кейсов включённых/выключенных фич         |
| Аналитика DSL | Отслеживание фич и поведения по ролям              |

---

## Продвинутые возможности

* Динамическое включение фич по расписанию
* Фича-флаги с возможностью удалённого управления
* Ограничения и лимиты на фичи (например, количество вызовов)
* Связывание с тарифами, ролями и сегментами

---

## Пример: продукт "Сервис Массажа"

```dsl
продукт MassageService {
  роли: [ Клиент, Массажист ]
  версии: [ Базовая, Премиум ]

  фича ОнлайнЗапись {
    активна: true
    доступна: [ Клиент ]
  }

  фича ОценкаМастера {
    активна: true
    доступна: [ Клиент, Массажист ]
    версии: [ Премиум ]
  }

  тариф Базовая {
    цена: 0
    доступныеФичи: [ ОнлайнЗапись ]
  }

  тариф Премиум {
    цена: 999
    доступныеФичи: [ ОнлайнЗапись, ОценкаМастера ]
  }
}
```

---

## Возможные расширения

* Связь с бизнес-целями и OKR
* Поддержка мультипродуктов и платформ
* Визуальный редактор для продуктовой матрицы
