# Product DSL — Документация

**Product DSL** — это слой в архитектуре Unified App DSL, предназначенный для декларативного описания структуры и особенностей продукта: его фичей, ролей, тарифов, сегментов пользователей и продуктовой логики.

---

## Цели Product DSL

* Централизованное описание бизнес-продукта
* Связь с другими слоями: Feature DSL, Access DSL, UI DSL, Test DSL
* Возможность формирования roadmap и управления фичами
* Поддержка A/B тестирования и версионирования

---

## Основные конструкции

### Описание продукта

```dsl
продукт Pillingator {
  версии: [ MVP, Pro, Premium ]
  роли: [ Клиент, Исполнитель, Администратор ]
  сегменты: [ B2C, B2B ]
}
```

### Описание фич

```dsl
фича МгновенныйЗаказ {
  активна: true
  доступна: [ Клиент, B2C ]
  версии: [ MVP, Pro ]
}

фича ОтложенныйВызов {
  активна: false
  доступна: [ Клиент ]
  версии: [ Pro, Premium ]
  включитьПосле: 2025-06-01
}
```

### Описание тарифов

```dsl
тариф Бесплатный {
  цена: 0
  доступныеФичи: [ МгновенныйЗаказ ]
}

тариф Премиум {
  цена: 799
  доступныеФичи: [ МгновенныйЗаказ, ОтложенныйВызов ]
}
```


---

## Интеграция с другими DSL

| DSL           | Взаимодействие с Product DSL                       |
| ------------- | -------------------------------------------------- |
| Feature DSL   | Product DSL управляет активностью фич              |
| Access DSL    | Определяет, кто имеет доступ к фичам               |
| UI DSL        | Определяет условную отрисовку в зависимости от фич |
| Test DSL      | Покрытие кейсов включённых/выключенных фич         |
| Analytics DSL | Отслеживание фич и поведения по ролям              |

---

## Продвинутые возможности

* Динамическое включение фич по расписанию
* Фича-флаги с возможностью удалённого управления
* Ограничения и лимиты на фичи (например, количество вызовов)
* Связывание с тарифами, ролями и сегментами

---

## Пример: продукт "Сервис Массажа"

```dsl
продукт MassageService {
  роли: [ Клиент, Массажист ]
  версии: [ Basic, Premium ]

  фича ОнлайнЗапись {
    активна: true
    доступна: [ Клиент ]
  }

  фича ОценкаМастера {
    активна: true
    доступна: [ Клиент, Массажист ]
    версии: [ Premium ]
  }

  тариф Basic {
    цена: 0
    доступныеФичи: [ ОнлайнЗапись ]
  }

  тариф Premium {
    цена: 999
    доступныеФичи: [ ОнлайнЗапись, ОценкаМастера ]
  }
}
```

---

## Возможные расширения

* Связь с бизнес-целями и OKR
* Поддержка мультипродуктов и платформ
* Визуальный редактор для продуктовой матрицы
