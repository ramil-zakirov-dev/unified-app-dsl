# Animation DSL — Документация

**Animation DSL** — это слой в архитектуре Unified App DSL, предназначенный для декларативного описания анимаций и переходов, которые могут использоваться в интерфейсах, взаимодействиях и визуальных компонентах.

---

## Цели Animation DSL

* Декларативное описание анимаций и переходов
* Интеграция с UI DSL, Layout DSL, Interaction DSL
* Переиспользуемость анимаций как компонентов
* Возможность адаптации к различным платформам (Flutter, Web, iOS, Android)
* Упрощение генерации анимаций в коде и прототипах

---

## Основные конструкции DSL

### Простейшая анимация

```dsl
анимация FadeIn {
  тип: появление
  продолжительность: 300мс
  кривизна: ease-in
}
```

### Анимация с несколькими шагами (ключевые кадры)

```dsl
анимация JumpIn {
  шаги: [
    { время: 0%, трансформация: scale(0.8) translateY(100px) },
    { время: 50%, трансформация: scale(1.1) translateY(-20px) },
    { время: 100%, трансформация: scale(1) translateY(0px) }
  ]
  продолжительность: 600мс
  кривизна: ease-out
}
```

### Применение анимации к элементу интерфейса

```dsl
элемент КнопкаПодтвердить {
  приПоявлении: FadeIn
  приНажатии: JumpIn
}
```

---

## Типы анимаций

* `появление` / `исчезновение`
* `движение` (slide, translate)
* `масштабирование` (scale)
* `вращение` (rotate)
* `непрозрачность` (opacity)
* `комбинированные` (keyframes / multiple transforms)

---

## Встроенные параметры

* `продолжительность` — длительность анимации (в мс или секундах)
* `задержка` — задержка перед началом
* `кривизна` — тип временной функции (ease, linear, ease-in-out и др.)
* `шаги` — ключевые кадры (в стиле CSS keyframes)

---

## Интеграции

| Слой            | Назначение                                     |
| --------------- | ---------------------------------------------- |
| UI DSL          | Применение к виджетам, кнопкам, контейнерам    |
| Layout DSL      | Анимация при изменении расположения            |
| Interaction DSL | Связь с событиями (hover, tap, longpress)      |
| Behavior DSL    | Запуск анимации в ответ на изменения состояния |

---

## Пример генерации Flutter кода

```dart
AnimatedOpacity(
  opacity: visible ? 1.0 : 0.0,
  duration: Duration(milliseconds: 300),
  curve: Curves.easeIn,
  child: Text("Привет!"),
)
```

---

## Возможные расширения

* Поддержка физически основанных анимаций (пружины, трение)
* Анимации по траекториям
* Состояния и переходы между ними (State Machine DSL?)
* Интеграция с WebGL, Canvas, SVG-анимациями
