# Validation DSL — Документация

**Validation DSL** — это слой в архитектуре Unified App DSL, предназначенный для декларативного описания правил валидации данных и форм. Он обеспечивает единый источник правды для логики проверки данных на клиенте и сервере, и может использоваться для генерации схем валидации в разных фреймворках (например, Zod, Yup, Joi).

---

## Цели Validation DSL

* Декларативное описание валидации форм и полей
* Повторное использование правил валидации
* Интеграция с UI DSL и Behavior DSL
* Генерация схем для фронтенда и бекенда
* Возможность локализации сообщений об ошибках

---

## Основные конструкции DSL

### Правила валидации

```dsl
правило emailОбязательно {
  поле: email
  тип: email
  обязательно: true
  сообщение: "Введите корректный email"
}

правило длинаПароля {
  поле: пароль
  минимум: 8
  максимум: 32
  сообщение: "Пароль должен быть от 8 до 32 символов"
}
```

### Схемы валидации

```dsl
валидация ФормаРегистрации {
  использовать: [emailОбязательно, длинаПароля]
}
```

---

## Использование в UI DSL

```dsl
форма РегистрацияФорма {
  поля: [email, пароль]
  валидация: ФормаРегистрации
  onSubmit: ЗарегистрироватьПользователя
}
```

---

## Встроенные типы валидации

* `string`, `number`, `boolean`, `date`, `enum`
* `email`, `url`, `uuid`, `regex`
* `минимум`, `максимум`, `обязательно`
* `кастомнаяФункция` (пользовательская проверка)

---

## Интеграции с другими слоями DSL

| DSL           | Роль                                               |
| ------------- | -------------------------------------------------- |
| UI DSL        | Привязка к полям формы и отображение ошибок        |
| Data DSL      | Валидация DTO, моделей и входных структур          |
| Behavior DSL  | Использование в логике при сабмите/вводе           |
| Natural Layer | Генерация правил из описания на естественном языке |

---

## Генерация

Validation DSL может быть скомпилирован в:

* **Zod (TypeScript)**
* **Yup (React)**
* **Joi (Node.js)**
* **Custom schema** для Flutter

---

## Пример генерации в Zod

```ts
const ФормаРегистрации = z.object({
  email: z.string().email("Введите корректный email"),
  пароль: z.string().min(8).max(32, "Пароль должен быть от 8 до 32 символов")
})
```

---

## Возможные расширения

* Поддержка множественных языков для сообщений об ошибках
* Автоматическая генерация UI-подсказок
* Расширение встроенных валидаторов
* Импорт схем из OpenAPI/GraphQL
